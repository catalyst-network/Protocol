trigger:
- develop

pool:
  vmImage: 'ubuntu-latest'

jobs:
- job: setupProtobuffs
  steps:
  - script: make getproto
    displayName: 'Get Protobuffs'
    condition: succeeded()

  - script: make installproto
    displayName: 'Intall Protobuffs'
    condition: succeeded()

  - script: make setpermissions
    displayName: 'Set permissions'
    condition: succeeded()

- job: sdkRust
  steps:
  - template: ./libs/sdk-rust/azure-pipeline.yml
  workingDirectory: libs/sdk-rust
  dependsOn: setupProtobuffs

- job: sdkJs
  steps:
  - template: ./libs/sdk-js/azure-pipeline.yml
  workingDirectory: libs/sdk-js
  dependsOn: setupProtobuffs